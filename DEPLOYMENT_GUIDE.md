# GitHub Actions éƒ¨ç½²è¯¦ç»†æŒ‡å—

è¿™æ˜¯ç¬¬ä¸€æ¬¡éƒ¨ç½² GitHub Actions çš„å®Œæ•´æ­¥éª¤æŒ‡å—ã€‚

## ðŸ“‹ ç›®å½•

1. [å‡†å¤‡å·¥ä½œ](#å‡†å¤‡å·¥ä½œ)
2. [åˆ›å»º GitHub ä»“åº“](#åˆ›å»º-github-ä»“åº“)
3. [é…ç½® GitHub Secrets](#é…ç½®-github-secrets)
4. [ä¸Šä¼ ä»£ç åˆ° GitHub](#ä¸Šä¼ ä»£ç åˆ°-github)
5. [æµ‹è¯•å·¥ä½œæµ](#æµ‹è¯•å·¥ä½œæµ)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## 1. å‡†å¤‡å·¥ä½œ

### 1.1 å‡†å¤‡ API å¯†é’¥

ç¡®ä¿ä½ æœ‰ä»¥ä¸‹ API å¯†é’¥ï¼ˆè‡³å°‘ä¸€ä¸ªï¼‰ï¼š

- **Gemini API Key** (æŽ¨èï¼Œå…è´¹é¢åº¦è¾ƒå¤§)
  - èŽ·å–åœ°å€: https://makersuite.google.com/app/apikey
- **é€šä¹‰åƒé—® API Key**
  - èŽ·å–åœ°å€: https://bailian.console.aliyun.com/
- **DeepSeek API Key**
  - èŽ·å–åœ°å€: https://platform.deepseek.com/
- æˆ–å…¶ä»– AI æä¾›å•†çš„å¯†é’¥

### 1.2 å‡†å¤‡é‚®ç®±é…ç½®

ä½ éœ€è¦ä¸€ä¸ªå¯ä»¥å‘é€é‚®ä»¶çš„é‚®ç®±è´¦æˆ·ã€‚æŽ¨èä½¿ç”¨ï¼š

- **Gmail** (æŽ¨èï¼Œé…ç½®ç®€å•)
- **QQ é‚®ç®±**
- **163 é‚®ç®±**
- æˆ–å…¶ä»–æ”¯æŒ SMTP çš„é‚®ç®±

#### Gmail é…ç½®æ­¥éª¤ï¼š

1. ç™»å½• Gmail
2. è¿›å…¥ [Google è´¦æˆ·è®¾ç½®](https://myaccount.google.com/)
3. å·¦ä¾§èœå•é€‰æ‹©"å®‰å…¨æ€§"
4. å¼€å¯"ä¸¤æ­¥éªŒè¯"ï¼ˆå¦‚æžœæœªå¼€å¯ï¼‰
5. åœ¨"å®‰å…¨æ€§"é¡µé¢æ‰¾åˆ°"åº”ç”¨ä¸“ç”¨å¯†ç "
6. åˆ›å»ºæ–°çš„åº”ç”¨ä¸“ç”¨å¯†ç ï¼ˆé€‰æ‹©"é‚®ä»¶"å’Œ"å…¶ä»–è®¾å¤‡"ï¼‰
7. **ä¿å­˜è¿™ä¸ª16ä½å¯†ç **ï¼ˆè¿™æ˜¯ä½ éœ€è¦çš„ `SMTP_PASSWORD`ï¼‰

---

## 2. åˆ›å»º GitHub ä»“åº“

### 2.1 åœ¨ GitHub ä¸Šåˆ›å»ºæ–°ä»“åº“

1. ç™»å½• [GitHub](https://github.com)
2. ç‚¹å‡»å³ä¸Šè§’ "+" â†’ "New repository"
3. å¡«å†™ä»“åº“ä¿¡æ¯ï¼š
   - **Repository name**: `news_nigeria` (æˆ–ä½ å–œæ¬¢çš„åå­—)
   - **Description**: å°¼æ—¥åˆ©äºšæ–°é—»çˆ¬å–ä¸ŽAIå¤„ç†
   - **Visibility**: 
     - é€‰æ‹© **Private** (ç§æœ‰ï¼ŒæŽ¨èï¼Œå› ä¸ºåŒ…å« API å¯†é’¥é…ç½®)
     - æˆ– **Public** (å…¬å¼€ï¼Œå…è´¹ä½†ä»£ç å¯è§)
   - **ä¸è¦**å‹¾é€‰ "Add a README file"ï¼ˆæˆ‘ä»¬å·²æœ‰ä»£ç ï¼‰
4. ç‚¹å‡» "Create repository"

### 2.2 åˆå§‹åŒ–æœ¬åœ° Git ä»“åº“

åœ¨ä½ çš„é¡¹ç›®ç›®å½•æ‰§è¡Œï¼š

```bash
# åˆå§‹åŒ– Git ä»“åº“
git init

# æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# åˆ›å»º .gitignore æ–‡ä»¶ï¼ˆå¦‚æžœè¿˜æ²¡æœ‰ï¼‰
cat > .gitignore << EOF
__pycache__/
*.pyc
*.pyo
*.pyd
.Python
*.so
*.egg
*.egg-info/
dist/
build/
.env
.venv
venv/
ENV/
env/
*.log
data/*.json
!data/.gitkeep
EOF

# æäº¤ä»£ç 
git commit -m "Initial commit: News crawler and AI processor"

# æ·»åŠ è¿œç¨‹ä»“åº“ï¼ˆæ›¿æ¢ YOUR_USERNAME ä¸ºä½ çš„ GitHub ç”¨æˆ·åï¼‰
git remote add origin https://github.com/YOUR_USERNAME/news_nigeria.git

# æŽ¨é€ä»£ç 
git branch -M main
git push -u origin main
```

---

## 3. é…ç½® GitHub Secrets

è¿™æ˜¯**æœ€å…³é”®**çš„æ­¥éª¤ï¼Secrets ç”¨äºŽå®‰å…¨å­˜å‚¨ä½ çš„ API å¯†é’¥å’Œé‚®ç®±å¯†ç ã€‚

### 3.1 è¿›å…¥ Secrets è®¾ç½®é¡µé¢

1. åœ¨ GitHub ä»“åº“é¡µé¢ï¼Œç‚¹å‡» **Settings** (è®¾ç½®)
2. å·¦ä¾§èœå•é€‰æ‹© **Secrets and variables** â†’ **Actions**
3. ç‚¹å‡» **New repository secret** æŒ‰é’®

### 3.2 æ·»åŠ å¿…éœ€çš„ Secrets

æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ·»åŠ æ¯ä¸ª Secretï¼š

#### 3.2.1 AI æä¾›å•†é…ç½®

**AI_PROVIDER**
- Name: `AI_PROVIDER`
- Secret: `gemini` (æˆ– `tongyi`, `deepseek` ç­‰)
- è¯´æ˜Ž: ä½ ä½¿ç”¨çš„ AI æä¾›å•†åç§°

**AI API Key** (æ ¹æ®ä½ é€‰æ‹©çš„æä¾›å•†æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ª)

**GEMINI_API_KEY** (å¦‚æžœä½¿ç”¨ Gemini)
- Name: `GEMINI_API_KEY`
- Secret: ä½ çš„ Gemini API å¯†é’¥
- è¯´æ˜Ž: ä»Ž https://makersuite.google.com/app/apikey èŽ·å–

**DASHSCOPE_API_KEY** (å¦‚æžœä½¿ç”¨é€šä¹‰åƒé—®)
- Name: `DASHSCOPE_API_KEY`
- Secret: ä½ çš„é€šä¹‰åƒé—® API å¯†é’¥

**DEEPSEEK_API_KEY** (å¦‚æžœä½¿ç”¨ DeepSeek)
- Name: `DEEPSEEK_API_KEY`
- Secret: ä½ çš„ DeepSeek API å¯†é’¥

#### 3.2.2 é‚®ä»¶é…ç½®

**SMTP_HOST**
- Name: `SMTP_HOST`
- Secret: 
  - Gmail: `smtp.gmail.com`
  - QQé‚®ç®±: `smtp.qq.com`
  - 163é‚®ç®±: `smtp.163.com`

**SMTP_PORT**
- Name: `SMTP_PORT`
- Secret: `587` (å¤§å¤šæ•°é‚®ç®±ä½¿ç”¨ 587)

**SMTP_USER**
- Name: `SMTP_USER`
- Secret: ä½ çš„å®Œæ•´é‚®ç®±åœ°å€ï¼Œä¾‹å¦‚: `yourname@gmail.com`

**SMTP_PASSWORD**
- Name: `SMTP_PASSWORD`
- Secret: 
  - Gmail: ä½¿ç”¨**åº”ç”¨ä¸“ç”¨å¯†ç **ï¼ˆ16ä½ï¼‰
  - å…¶ä»–é‚®ç®±: ä½¿ç”¨é‚®ç®±å¯†ç æˆ–æŽˆæƒç 

**EMAIL_TO**
- Name: `EMAIL_TO`
- Secret: æŽ¥æ”¶æŠ¥å‘Šçš„é‚®ç®±åœ°å€ï¼Œä¾‹å¦‚: `recipient@example.com`

### 3.3 éªŒè¯ Secrets

æ·»åŠ å®Œæ‰€æœ‰ Secrets åŽï¼Œä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„åˆ—è¡¨ï¼š

```
âœ… AI_PROVIDER
âœ… GEMINI_API_KEY
âœ… SMTP_HOST
âœ… SMTP_PORT
âœ… SMTP_USER
âœ… SMTP_PASSWORD
âœ… EMAIL_TO
```

---

## 4. ä¸Šä¼ ä»£ç åˆ° GitHub

### 4.1 ç¡®ä¿æ‰€æœ‰æ–‡ä»¶å·²æäº¤

```bash
# æ£€æŸ¥çŠ¶æ€
git status

# å¦‚æžœæœ‰æœªæäº¤çš„æ–‡ä»¶ï¼Œæ·»åŠ å¹¶æäº¤
git add .
git commit -m "Add GitHub Actions workflow and email support"

# æŽ¨é€åˆ° GitHub
git push origin main
```

### 4.2 éªŒè¯å·¥ä½œæµæ–‡ä»¶

ç¡®ä¿ä»¥ä¸‹æ–‡ä»¶å·²ä¸Šä¼ ï¼š
- `.github/workflows/daily-news.yml` âœ“
- `send_email.py` âœ“
- å…¶ä»–æ‰€æœ‰é¡¹ç›®æ–‡ä»¶ âœ“

---

## 5. æµ‹è¯•å·¥ä½œæµ

### 5.1 æ‰‹åŠ¨è§¦å‘æµ‹è¯•

1. åœ¨ GitHub ä»“åº“é¡µé¢ï¼Œç‚¹å‡» **Actions** æ ‡ç­¾
2. å·¦ä¾§é€‰æ‹© **Daily News Crawl and Process**
3. ç‚¹å‡» **Run workflow** æŒ‰é’®
4. é€‰æ‹©åˆ†æ”¯ï¼ˆé€šå¸¸æ˜¯ `main`ï¼‰
5. ç‚¹å‡»ç»¿è‰²çš„ **Run workflow** æŒ‰é’®

### 5.2 æŸ¥çœ‹æ‰§è¡Œæ—¥å¿—

1. ç‚¹å‡»åˆšåˆ›å»ºçš„å·¥ä½œæµè¿è¡Œ
2. ç‚¹å‡» **crawl-and-process** job
3. æŸ¥çœ‹æ¯ä¸ªæ­¥éª¤çš„æ‰§è¡Œæƒ…å†µ
4. å¦‚æžœæœ‰é”™è¯¯ï¼Œç‚¹å‡»å¤±è´¥çš„æ­¥éª¤æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### 5.3 æ£€æŸ¥é‚®ä»¶

- æ‰§è¡Œå®ŒæˆåŽï¼Œæ£€æŸ¥ä½ çš„é‚®ç®±ï¼ˆåŒ…æ‹¬åžƒåœ¾é‚®ä»¶æ–‡ä»¶å¤¹ï¼‰
- åº”è¯¥æ”¶åˆ°åŒ…å«æŠ¥å‘Šé™„ä»¶çš„é‚®ä»¶

### 5.4 æ£€æŸ¥ Artifacts

1. åœ¨å·¥ä½œæµè¿è¡Œé¡µé¢åº•éƒ¨ï¼Œæ‰¾åˆ° **Artifacts** éƒ¨åˆ†
2. å¯ä»¥ä¸‹è½½åŒ…å«æ‰€æœ‰æŠ¥å‘Šå’Œæ—¥å¿—çš„åŽ‹ç¼©åŒ…

---

## 6. å¸¸è§é—®é¢˜

### 6.1 å·¥ä½œæµæ²¡æœ‰è‡ªåŠ¨è¿è¡Œ

**é—®é¢˜**: å®šæ—¶ä»»åŠ¡æ²¡æœ‰æ‰§è¡Œ

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ cron è¡¨è¾¾å¼æ˜¯å¦æ­£ç¡®
2. ç¡®ä¿ä»“åº“æ˜¯æ´»è·ƒçš„ï¼ˆGitHub ä¼šæš‚åœä¸æ´»è·ƒä»“åº“çš„å®šæ—¶ä»»åŠ¡ï¼‰
3. æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡ï¼Œç¡®ä¿å·¥ä½œæµé…ç½®æ­£ç¡®

### 6.2 é‚®ä»¶å‘é€å¤±è´¥

**é—®é¢˜**: æ”¶åˆ° "é‚®ä»¶å‘é€å¤±è´¥" çš„é”™è¯¯

**å¯èƒ½åŽŸå› å’Œè§£å†³æ–¹æ¡ˆ**:

1. **Gmail è®¤è¯å¤±è´¥**
   - ç¡®ä¿ä½¿ç”¨äº†**åº”ç”¨ä¸“ç”¨å¯†ç **è€Œä¸æ˜¯æ™®é€šå¯†ç 
   - ç¡®ä¿å·²å¼€å¯ä¸¤æ­¥éªŒè¯

2. **å…¶ä»–é‚®ç®±è®¤è¯å¤±è´¥**
   - QQé‚®ç®±: éœ€è¦åœ¨é‚®ç®±è®¾ç½®ä¸­å¼€å¯ SMTP æœåŠ¡å¹¶èŽ·å–æŽˆæƒç 
   - 163é‚®ç®±: åŒæ ·éœ€è¦å¼€å¯ SMTP å¹¶èŽ·å–æŽˆæƒç 

3. **SMTP é…ç½®é”™è¯¯**
   - æ£€æŸ¥ `SMTP_HOST` å’Œ `SMTP_PORT` æ˜¯å¦æ­£ç¡®
   - æŸäº›é‚®ç®±å¯èƒ½éœ€è¦ä½¿ç”¨ SSL (ç«¯å£ 465) è€Œä¸æ˜¯ TLS (ç«¯å£ 587)

### 6.3 AI API è°ƒç”¨å¤±è´¥

**é—®é¢˜**: AI å¤„ç†æ­¥éª¤å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ API å¯†é’¥æ˜¯å¦æ­£ç¡®è®¾ç½®
2. æ£€æŸ¥è´¦æˆ·ä½™é¢æ˜¯å¦å……è¶³
3. æŸ¥çœ‹æ—¥å¿—ä¸­çš„å…·ä½“é”™è¯¯ä¿¡æ¯
4. å°è¯•åˆ‡æ¢åˆ°å…¶ä»– AI æä¾›å•†

### 6.4 çˆ¬å–å¤±è´¥

**é—®é¢˜**: æŸäº›ç½‘ç«™æ— æ³•çˆ¬å–

**è§£å†³æ–¹æ¡ˆ**:
1. è¿™æ˜¯æ­£å¸¸çš„ï¼ŒæŸäº›ç½‘ç«™æœ‰åçˆ¬è™«ä¿æŠ¤
2. å·¥ä½œæµä¼šç»§ç»­å¤„ç†æˆåŠŸçˆ¬å–çš„æ–‡ç« 
3. å¯ä»¥æŸ¥çœ‹æ—¥å¿—äº†è§£å…·ä½“å“ªäº›ç½‘ç«™å¤±è´¥

### 6.5 æ—¶åŒºé—®é¢˜

**é—®é¢˜**: æ‰§è¡Œæ—¶é—´ä¸å¯¹

**è§£å†³æ–¹æ¡ˆ**:
1. GitHub Actions ä½¿ç”¨ UTC æ—¶é—´
2. åŒ—äº¬æ—¶é—´ = UTC + 8
3. ä¾‹å¦‚ï¼šåŒ—äº¬æ—¶é—´ 10:00 = UTC 02:00
4. ä¿®æ”¹ `.github/workflows/daily-news.yml` ä¸­çš„ cron è¡¨è¾¾å¼

**å¸¸ç”¨æ—¶é—´å¯¹ç…§**:
- åŒ—äº¬æ—¶é—´ 08:00 â†’ UTC 00:00 â†’ cron: `0 0 * * *`
- åŒ—äº¬æ—¶é—´ 10:00 â†’ UTC 02:00 â†’ cron: `0 2 * * *`
- åŒ—äº¬æ—¶é—´ 14:00 â†’ UTC 06:00 â†’ cron: `0 6 * * *`
- åŒ—äº¬æ—¶é—´ 20:00 â†’ UTC 12:00 â†’ cron: `0 12 * * *`

---

## 7. åŽç»­ä¼˜åŒ–

### 7.1 è°ƒæ•´æ‰§è¡Œæ—¶é—´

ç¼–è¾‘ `.github/workflows/daily-news.yml`ï¼Œä¿®æ”¹ cron è¡¨è¾¾å¼ï¼š

```yaml
schedule:
  - cron: '0 2 * * *'  # ä¿®æ”¹è¿™é‡Œçš„æ•°å­—
```

### 7.2 æ·»åŠ æ›´å¤šé€šçŸ¥æ–¹å¼

å¯ä»¥æ·»åŠ ï¼š
- Slack é€šçŸ¥
- Discord é€šçŸ¥
- ä¼ä¸šå¾®ä¿¡é€šçŸ¥

### 7.3 ç›‘æŽ§å’Œå‘Šè­¦

- è®¾ç½®å·¥ä½œæµå¤±è´¥æ—¶çš„é‚®ä»¶é€šçŸ¥ï¼ˆåœ¨ GitHub Settings â†’ Notifications ä¸­é…ç½®ï¼‰
- ä½¿ç”¨ GitHub Actions çš„ status badge æ˜¾ç¤ºè¿è¡ŒçŠ¶æ€

---

## 8. å®‰å…¨å»ºè®®

1. **æ°¸è¿œä¸è¦**åœ¨ä»£ç ä¸­ç¡¬ç¼–ç  API å¯†é’¥
2. **ä½¿ç”¨ Secrets** å­˜å‚¨æ‰€æœ‰æ•æ„Ÿä¿¡æ¯
3. **å®šæœŸè½®æ¢** API å¯†é’¥å’Œå¯†ç 
4. **ä½¿ç”¨ç§æœ‰ä»“åº“**ï¼ˆå¦‚æžœå¯èƒ½ï¼‰
5. **å®¡æŸ¥**å·¥ä½œæµæ—¥å¿—ï¼Œç¡®ä¿æ²¡æœ‰æ³„éœ²æ•æ„Ÿä¿¡æ¯

---

## 9. èŽ·å–å¸®åŠ©

å¦‚æžœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹ GitHub Actions æ—¥å¿—
2. æ£€æŸ¥ Secrets é…ç½®
3. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„"å¸¸è§é—®é¢˜"éƒ¨åˆ†
4. åœ¨ GitHub Issues ä¸­æé—®

---

## âœ… æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰ç¡®è®¤ï¼š

- [ ] GitHub ä»“åº“å·²åˆ›å»º
- [ ] ä»£ç å·²æŽ¨é€åˆ° GitHub
- [ ] `.github/workflows/daily-news.yml` æ–‡ä»¶å­˜åœ¨
- [ ] `send_email.py` æ–‡ä»¶å­˜åœ¨
- [ ] æ‰€æœ‰å¿…éœ€çš„ Secrets å·²é…ç½®
- [ ] æ‰‹åŠ¨è§¦å‘æµ‹è¯•æˆåŠŸ
- [ ] æ”¶åˆ°æµ‹è¯•é‚®ä»¶
- [ ] å®šæ—¶ä»»åŠ¡å·²è®¾ç½®

å®Œæˆä»¥ä¸Šæ‰€æœ‰æ­¥éª¤åŽï¼Œä½ çš„è‡ªåŠ¨åŒ–å·¥ä½œæµå°±éƒ¨ç½²å®Œæˆäº†ï¼ðŸŽ‰
